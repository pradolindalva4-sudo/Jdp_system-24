<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>DONNY BURGER - GOLD STAMP SYSTEM</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        :root {
            --jdp-gold: #f59e0b;
            --jdp-gold-gradient: linear-gradient(135deg, #bf953f, #fcf6ba, #b38728, #fbf5b7, #aa771c);
            --jdp-bg: #050505;
            --carbon: url('https://www.transparenttextures.com/patterns/carbon-fibre.png');
        }

        body {
            background: var(--jdp-bg);
            color: #fff;
            font-family: 'Inter', sans-serif;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        /* HEADER COM COMANDO DE IMPORTA√á√ÉO */
        .header-industrial {
            width: 100%;
            height: 80px;
            background: #111;
            border-bottom: 2px solid var(--jdp-gold);
            display: flex;
            justify-content: space-around;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .btn-importar {
            background: var(--jdp-gold-gradient);
            color: #000;
            padding: 12px 20px;
            border-radius: 5px;
            font-weight: 900;
            font-size: 12px;
            border: none;
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            text-transform: uppercase;
        }

        /* √ÅREA DE TRABALHO (O COMPROVANTE) */
        .workspace {
            margin-top: 20px;
            width: 90%;
            max-width: 400px;
            position: relative;
            border: 1px solid #333;
            background: #000;
            min-height: 300px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            overflow: hidden;
        }

        #img-preview {
            width: 100%;
            display: block;
        }

        /* O SELO DE OURO SUPREME */
        .selo-ouro {
            position: absolute;
            width: 140px;
            height: 140px;
            border: 4px double #bf953f;
            border-radius: 50%;
            display: none; /* Inicia oculto */
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            background: rgba(0,0,0,0.2);
            backdrop-filter: blur(1px);
            color: #fcf6ba;
            font-weight: 900;
            text-shadow: 1px 1px 2px #000;
            transform: rotate(-25deg);
            box-shadow: 0 0 15px rgba(191, 149, 63, 0.5);
            pointer-events: none;
            z-index: 50;
            top: 50%;
            left: 50%;
            margin-left: -70px;
            margin-top: -70px;
        }

        .selo-ouro span {
            font-size: 10px;
            letter-spacing: 1px;
        }

        .selo-ouro strong {
            font-size: 24px;
            display: block;
            margin: 2px 0;
            background: var(--jdp-gold-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* CONTROLES INFERIORES */
        .controles-fixos {
            position: fixed;
            bottom: 0;
            width: 100%;
            background: rgba(0,0,0,0.9);
            padding: 20px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            border-top: 1px solid #222;
        }

        .btn-acao {
            padding: 18px;
            border-radius: 8px;
            border: none;
            font-weight: 900;
            text-transform: uppercase;
            font-size: 12px;
        }

        .btn-carimbar { background: #222; color: var(--jdp-gold); border: 1px solid var(--jdp-gold); }
        .btn-enviar { background: #25D366; color: #fff; grid-column: span 2; margin-top: 5px; }
        .btn-download { background: #fff; color: #000; }

        #file-input { display: none; }
    </style>
</head>
<body>

    <div class="header-industrial">
        <div style="text-align: center;">
            <div style="font-size: 10px; color: var(--jdp-gold);">SISTEMA</div>
            <div style="font-weight: 900; letter-spacing: 2px;">CANYON</div>
        </div>
        
        <button class="btn-importar" onclick="document.getElementById('file-input').click()">
            <i class="fas fa-file-import"></i> TRAZER M√çDIA
        </button>
    </div>

    <input type="file" id="file-input" accept="image/*" onchange="carregarImagem(event)">

    <div class="workspace" id="capture-area">
        <img id="img-preview" src="" style="display: none;">
        
        <!-- SELO DE OURO -->
        <div class="selo-ouro" id="carimbo-ouro">
            <span>DONNY BURGER</span>
            <strong>PAGO</strong>
            <span>JDP INDUSTRIAL</span>
        </div>
    </div>

    <div class="controles-fixos">
        <button class="btn-acao btn-carimbar" onclick="toggleCarimbo()">
            <i class="fas fa-stamp"></i> APLICAR OURO
        </button>
        <button class="btn-acao btn-download" onclick="baixarFinal()">
            <i class="fas fa-save"></i> SALVAR
        </button>
        <button class="btn-acao btn-enviar" onclick="enviarWhatsApp()">
            <i class="fab fa-whatsapp"></i> ENVIAR AUTENTICADO
        </button>
    </div>

    <script>
        const WHATSAPP_NUM = "5592984846058";

        function carregarImagem(event) {
            const reader = new FileReader();
            reader.onload = function() {
                const output = document.getElementById('img-preview');
                output.src = reader.result;
                output.style.display = 'block';
                // Reset carimbo ao carregar nova imagem
                document.getElementById('carimbo-ouro').style.display = 'none';
            }
            reader.readAsDataURL(event.target.files[0]);
        }

        function toggleCarimbo() {
            const carimbo = document.getElementById('carimbo-ouro');
            const img = document.getElementById('img-preview');
            
            if(!img.src || img.style.display === 'none') {
                alert("PRIMEIRO TRAGA A M√çDIA!");
                return;
            }

            carimbo.style.display = (carimbo.style.display === 'flex') ? 'none' : 'flex';
        }

        function baixarFinal() {
            const area = document.getElementById('capture-area');
            html2canvas(area, { useCORS: true, backgroundColor: "#000" }).then(canvas => {
                const link = document.createElement('a');
                link.download = `DONNY-AUTENTICADO-${Date.now()}.png`;
                link.href = canvas.toDataURL();
                link.click();
            });
        }

        function enviarWhatsApp() {
            const carimboAtivo = document.getElementById('carimbo-ouro').style.display === 'flex';
            let status = carimboAtivo ? "*PAGO E AUTENTICADO EM OURO*" : "*PENDENTE*";
            
            // Primeiro baixamos para o senhor ter o arquivo
            baixarFinal();

            // Depois enviamos o comando de texto
            const msg = `*üî• DONNY BURGER - SISTEMA CANYON*\n\n` +
                        `O comprovante foi processado e autenticado.\n` +
                        `Status: ${status}\n` +
                        `Data: ${new Date().toLocaleString('pt-BR')}\n\n` +
                        `_Anexe a imagem baixada acima nesta conversa._`;

            window.open(`https://wa.me/${WHATSAPP_NUM}?text=${encodeURIComponent(msg)}`);
        }
    </script>
</body>
</html>
